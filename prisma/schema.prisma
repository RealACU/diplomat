generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}

enum States {
  AL
  AK
  AZ
  AR
  CA
  CO
  CT
  DE
  FL
  GA
  HI
  ID
  IL
  IN
  IA
  KS
  KY
  LA
  ME
  MD
  MA
  MI
  MN
  MS
  MO
  MT
  NE
  NV
  NH
  NJ
  NM
  NY
  NC
  ND
  OH
  OK
  OR
  PA
  RI
  SC
  SD
  TN
  TX
  UT
  VT
  VA
  WA
  WV
  WI
  WY
}

model Tourney {
  id                  String      @id @default(cuid())
  creatorId           String
  name                String
  description         String
  school              String
  address             String
  city                String
  state               States
  zip                 String
  startDate           DateTime
  endDate             DateTime
  committees          Committee[]
  primaryColorHex     String
  secondaryColorHex   String
}

model Committee {
  id              Int              @id @default(autoincrement())
  name            String
  roomNumber      String
  chairIds        String[]
  delegateIds     String[]
  delegateResults DelegateResult[]

  Tourney   Tourney? @relation(fields: [tourneyId], references: [id], onDelete: Cascade)
  tourneyId String?
}

model DelegateResult {
  id         Int    @id @default(autoincrement())
  delegateId String
  feedback   String

  Committee   Committee? @relation(fields: [committeeId], references: [id], onDelete: Cascade)
  committeeId Int?
}
